apiVersion: gateway.tsb.tetrate.io/v2
kind: IngressGateway
Metadata:
  organization: {{ orgName }}
  name: {{ gatewayName }}
  group: {{ gatewayGroupName }}
  workspace: {{ workspaceName }}
  tenant: {{ tenantName }}
spec:
  workloadSelector:
    namespace: {{ (namespaces and namespaces["product"]) or namespace }}
    labels:
      app: tsb-gateway-{{ (namespaces and namespaces["product"]) or namespace }}
  http:
  - name: bookinfo
    port: 8443
    hostname: {{ hostname }}
    tls:
      mode: SIMPLE
      secretName: {{ gwSecretName }}
    routing:
      rules:
      - route:
          host: {{ (namespaces and namespaces["product"]) or namespace }}/{{ productHostFQDN }}
